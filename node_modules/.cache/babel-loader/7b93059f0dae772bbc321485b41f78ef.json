{"ast":null,"code":"import _slicedToArray from\"/home/nishant/travel_app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useLocation}from\"react-router-dom\";import memoriesLogo from'../../images/memoriesLogo.png';import memoriesText from'../../images/memoriesText.png';import useStyles from'./styles';import{Typography,AppBar,Toolbar,Avatar,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import decode from\"jwt-decode\";var Navbar=function Navbar(){var classes=useStyles();var diaptch=useDispatch();var history=useHistory();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];console.log(user);var logout=function logout(){diaptch({type:'LOGOUT'});history.push(\"/\");setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,style:{display:\"flex\",flexDirection:\"row\"},position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:classes.brandContainer},/*#__PURE__*/React.createElement(\"img\",{src:memoriesText,alt:\"logo\",height:\"45px\"}),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:memoriesLogo,alt:\"memories\",height:\"60\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl},user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",onClick:logout},\" Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign in\")));};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","memoriesLogo","memoriesText","useStyles","Typography","AppBar","Toolbar","Avatar","Button","useDispatch","useHistory","decode","Navbar","classes","diaptch","history","location","JSON","parse","localStorage","getItem","user","setUser","console","log","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","display","flexDirection","brandContainer","image","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"sources":["/home/nishant/travel_app/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\nimport { Link,useLocation } from \"react-router-dom\"\nimport memoriesLogo from '../../images/memoriesLogo.png'\nimport memoriesText from '../../images/memoriesText.png'\nimport useStyles from './styles'\nimport { Typography, AppBar, Toolbar, Avatar, Button } from '@material-ui/core'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport decode from \"jwt-decode\"\n\nconst Navbar = () => {\n    const classes = useStyles();\n    const diaptch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const [user,setUser] = useState(JSON.parse(localStorage.getItem('profile')))\n    console.log(user)\n\n    const logout = () =>{\n        diaptch({type:'LOGOUT'})\n        history.push(\"/\")\n        setUser(null)\n    }\n\n    useEffect(() => {\n        const token = user?.token;\n\n        if(token){\n            const decodedToken = decode(token)\n            if(decodedToken.exp * 1000<new Date().getTime()) logout();\n        }\n        setUser(JSON.parse(localStorage.getItem('profile')))\n    }, [location])\n    \n  \n\n    return (\n        <AppBar className={classes.appBar}  style={{display:\"flex\",flexDirection :\"row\"}} position=\"static\" color=\"inherit\">\n            <Link to='/' className={classes.brandContainer}>\n                <img src={memoriesText} alt =\"logo\" height = '45px'/>\n                <img className={classes.image} src={memoriesLogo} alt=\"memories\" height=\"60\" />\n            </Link>\n            <Toolbar className={classes.toolbar}>\n                {user?.result? (\n                    <div className={classes.profile}>\n                        <Avatar className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>{user.result.name.charAt(0)}</Avatar>\n                        <Typography className={classes.userName} variant=\"h6\">{user.result.name}</Typography>\n                        <Button variant='contained' color=\"secondary\" onClick={logout}> Logout</Button>\n                    </div>\n                ) : (\n                    <Button component={Link} to=\"/auth\" variant='contained' color=\"primary\">Sign in</Button>\n                )}\n            </Toolbar>\n        </AppBar>\n\n    )\n}\n\nexport default Navbar"],"mappings":"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"},"metadata":{},"sourceType":"module"}