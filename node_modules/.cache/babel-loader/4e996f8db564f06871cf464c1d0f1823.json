{"ast":null,"code":"import React from'react';import{useEffect}from'react';import{Paper,Typography,CircularProgress,Divider}from'@material-ui/core';import{useSelector,useDispatch}from'react-redux';import moment from'moment';import{useHistory,useParams}from'react-router-dom';import useStyle from'./styles';import{getPost,getPostBySearch}from'../../actions/posts';import CommentSection from'./CommentSection';var PostDetails=function PostDetails(){console.log(\"Post Deatils\");var _useSelector=useSelector(function(state){return state.posts;}),post=_useSelector.post,posts=_useSelector.posts,isLoading=_useSelector.isLoading;var dispatch=useDispatch();var history=useHistory();var classes=useStyle();var _useParams=useParams(),id=_useParams.id;useEffect(function(){dispatch(getPost(id));},[dispatch,id]);useEffect(function(){dispatch(getPostBySearch({search:\"null\",tags:post===null||post===void 0?void 0:post.tags.join(\",\")}));},[dispatch,post]);if(!post)return null;if(isLoading){return/*#__PURE__*/React.createElement(Paper,{elevation:6,className:classes.loadingPaper},/*#__PURE__*/React.createElement(CircularProgress,{size:\"7em\"}));}var recommnedPost=posts.filter(function(_ref){var _id=_ref._id;return _id!==post._id;});var openPost=function openPost(_id){return history.push(\"/posts/\".concat(_id));};return/*#__PURE__*/React.createElement(Paper,{style:{padding:'20px',borderRadius:'15px'},elevation:6},/*#__PURE__*/React.createElement(\"div\",{className:classes.card},/*#__PURE__*/React.createElement(\"div\",{className:classes.section},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",component:\"h2\"},post.title),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\",color:\"textSecondary\",component:\"h2\"},post.tags.map(function(tag){return\"#\".concat(tag,\" \");})),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"body1\",component:\"p\"},post.message),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},\"Created by: \",post.name),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},moment(post.createdAt).fromNow()),/*#__PURE__*/React.createElement(Divider,{style:{margin:'20px 0'}}),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Realtime Chat - coming soon!\")),/*#__PURE__*/React.createElement(Divider,{style:{margin:'20px 0'}}),/*#__PURE__*/React.createElement(CommentSection,{post:post}),/*#__PURE__*/React.createElement(Divider,{style:{margin:'20px 0'}})),/*#__PURE__*/React.createElement(\"div\",{className:classes.imageSection},/*#__PURE__*/React.createElement(\"img\",{className:classes.media,src:post.selectedFile||'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png',alt:post.title}))),recommnedPost.length&&/*#__PURE__*/React.createElement(\"div\",{className:classes.section},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h5\"},\" You Might also like this\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.recommendedPosts},recommnedPost.map(function(_ref2){var title=_ref2.title,message=_ref2.message,selectedFile=_ref2.selectedFile,name=_ref2.name,likes=_ref2.likes,_id=_ref2._id;return/*#__PURE__*/React.createElement(\"div\",{style:{margin:'20px',cursor:\"pointer\"},onClick:function onClick(){return openPost(_id);},key:_id},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\"},title),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"subtitle2\"},name),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"subtitle2\"},message),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"subtitle1\"},\"Likes:\",likes.length),/*#__PURE__*/React.createElement(\"img\",{src:selectedFile,width:\"200px\",alt:\"selectedFile\"}));}))));};export default PostDetails;","map":{"version":3,"names":["React","useEffect","Paper","Typography","CircularProgress","Divider","useSelector","useDispatch","moment","useHistory","useParams","useStyle","getPost","getPostBySearch","CommentSection","PostDetails","console","log","state","posts","post","isLoading","dispatch","history","classes","id","search","tags","join","loadingPaper","recommnedPost","filter","_id","openPost","push","padding","borderRadius","card","section","title","map","tag","message","name","createdAt","fromNow","margin","imageSection","media","selectedFile","length","recommendedPosts","likes","cursor"],"sources":["/home/nishant/travel_app/client/src/components/postDetails/PostDetails.js"],"sourcesContent":["import React from 'react'\nimport { useEffect } from 'react'\nimport { Paper, Typography, CircularProgress, Divider } from '@material-ui/core'\nimport { useSelector, useDispatch } from 'react-redux'\nimport moment from 'moment'\nimport { useHistory, useParams } from 'react-router-dom'\nimport useStyle from './styles'\nimport { getPost,getPostBySearch } from '../../actions/posts'\nimport CommentSection from './CommentSection'\nconst PostDetails = () => {\n  console.log(\"Post Deatils\")\n  const { post, posts, isLoading } = useSelector((state) => state.posts)\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const classes = useStyle()\n  const { id } = useParams()\n\n  useEffect(() => {\n    dispatch(getPost(id))\n  }, [dispatch,id])\n\nuseEffect(()=>{\n  dispatch(getPostBySearch({search :\"null\",tags:post?.tags.join(\",\")}))\n},[dispatch,post])\n\n\n  if (!post) return null;\n  if (isLoading) {\n    return (\n\n      <Paper elevation={6} className={classes.loadingPaper}>\n        <CircularProgress size='7em' />\n      </Paper>\n    )\n  }\n  const recommnedPost = posts.filter(({_id}) => _id !==post._id)\n  const openPost = (_id) =>history.push(`/posts/${_id}`) \n\n  return (\n    <Paper style={{ padding: '20px', borderRadius: '15px' }} elevation={6}>\n      <div className={classes.card}>\n        <div className={classes.section}>\n          <Typography variant=\"h3\" component=\"h2\">{post.title}</Typography>\n          <Typography gutterBottom variant=\"h6\" color=\"textSecondary\" component=\"h2\">{post.tags.map((tag) => `#${tag} `)}</Typography>\n          <Typography gutterBottom variant=\"body1\" component=\"p\">{post.message}</Typography>\n          <Typography variant=\"h6\">Created by: {post.name}</Typography>\n          <Typography variant=\"body1\">{moment(post.createdAt).fromNow()}</Typography>\n          <Divider style={{ margin: '20px 0' }} />\n          <Typography variant=\"body1\"><strong>Realtime Chat - coming soon!</strong></Typography>\n          <Divider style={{ margin: '20px 0' }} />\n         <CommentSection post = {post} />\n          <Divider style={{ margin: '20px 0' }} />\n        </div>\n        <div className={classes.imageSection}>\n          <img className={classes.media} src={post.selectedFile || 'https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png'} alt={post.title} />\n        </div>\n      </div>\n      {recommnedPost.length &&(\n        <div className= {classes.section}>\n          <Typography gutterBottom variant='h5' > You Might also like this</Typography>\n          <Divider />\n          <div className={classes.recommendedPosts}>\n            {recommnedPost.map(({title,message,selectedFile,name,likes,_id})=>(\n              <div style={{margin:'20px',cursor:\"pointer\",}} onClick = {()=>openPost(_id)} key= {_id}>\n              <Typography gutterBottom variant='h6'>{title}</Typography>\n              <Typography gutterBottom variant='subtitle2'>{name}</Typography>\n              <Typography gutterBottom variant='subtitle2'>{message}</Typography>\n              <Typography gutterBottom variant='subtitle1'>Likes:{likes.length}</Typography>\n              <img src={selectedFile} width =\"200px\" alt='selectedFile'/>\n              </div>\n            ))}\n\n          </div>\n        </div>\n      )}\n    </Paper>\n  )\n}\n\nexport default PostDetails"],"mappings":"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"},"metadata":{},"sourceType":"module"}